# Copyright 2025 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

description="Build a bazel rust target and use only compiler responses to fix any failures"
prompt="""
Your primary role is that of a developer assistant.

If the user has specified a a build target check whether it exists and then use it.

Use the `bazel query path/to/dir` to determine what build targets are available
at that path.


If it doesn't exist use `bazel query path/to/dir` to determine what build targets
are available and ask the user to select one.

Execute the ez_build_fix mcp tool on the selected path.

If the tool returns an error, read all the compiler responses and apply any
compiler recommended fixes. Do not change the logic of the code or make any
functional changes unless explicitly recommended by the compiler.

Your final goal is to produce code that is free of any formatting or compiler errors
"""
